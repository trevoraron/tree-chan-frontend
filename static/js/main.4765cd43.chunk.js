(this["webpackJsonptree-chan-frontend"]=this["webpackJsonptree-chan-frontend"]||[]).push([[0],{64:function(e,t){},83:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(50),s=n.n(c),i=n(2),o=n.n(i),u=n(21),j=n(14),d=n(86),b=n(91),l=n(88),O=n(22),f=n(17),x=n(85),h=n(89),p=n(87),g=n(54),m="0xFc2540389af95921a8c2D8AeA3A884bf9e38cee8",v=["function getMessage(uint256 _token) external view returns (string message)","function ownerOf(uint256 _tokenId) external view returns (address)","function getParents(uint256 _token) external view returns (uint256[] memory)","function getBranches(uint256 _token) external view returns (uint256[] memory)","function newThread(string memory _message) public returns (uint256)","function comment(uint256 _post, string memory _message)","function totalSupply() external view returns (uint256)","event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId)"],w=n(6);function k(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),i=Object(j.a)(s,2),l=i[0],f=i[1];function p(){return g.apply(this,arguments)}function g(){return(g=Object(u.a)(o.a.mark((function t(){var n,r,a,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createNewFunction(l);case 2:return n=t.sent,console.log("Transaction hash: ".concat(n.hash)),c(!0),t.next=7,n.wait();case 7:r=t.sent,console.log("Transaction confirmed in block ".concat(r.blockNumber)),a=new O.a.utils.Interface(v),s=a.parseLog(r.events[0]),i=s.args._tokenId,console.log("New Token ID: ".concat(i)),f(""),c(!1),e.updateID(i);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var m=Object(w.jsx)(h.a,{onSubmit:function(e){e.preventDefault()},children:Object(w.jsx)(h.a.Control,{as:"textarea",rows:2,value:l,onChange:function(e){return f(e.target.value)}})});return a&&(m=Object(w.jsxs)(x.a,{children:[Object(w.jsx)(d.a,{animation:"border",role:"status"}),"\xa0"]})),Object(w.jsxs)(w.Fragment,{children:[m,"\xa0",Object(w.jsx)(b.a,{variant:"primary",onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:case"end":return e.stop()}}),e)}))),children:e.name})]})}var S=n(90);function y(e){var t=Object(r.useState)(""),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),i=Object(j.a)(s,2),l=i[0],f=i[1];Object(r.useEffect)((function(){var t=new O.a.Contract(m,v,e.signer);(function(){var n=Object(u.a)(o.a.mark((function n(){var r,a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.ownerOf(e.id);case 2:return r=n.sent,n.next=5,t.getMessage(e.id);case 5:a=n.sent,c(a),f(r);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[e.id,e.signer]);var x=Object(w.jsx)(d.a,{animation:"border",role:"status"});return""!==a&&(x=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(S.a.Subtitle,{children:["Owner: ",l]}),Object(w.jsx)(S.a.Text,{children:a})]})),Object(w.jsx)(S.a,{children:Object(w.jsxs)(S.a.Body,{children:[Object(w.jsxs)(S.a.Title,{children:["Post #",e.id.toString()]}),x,Object(w.jsx)(k,{signer:e.signer,updateID:e.updateID,createNewFunction:function(t){return new O.a.Contract(m,v,e.signer).comment(e.id,t)},name:"New Comment"}),Object(w.jsx)(b.a,{variant:"secondary",onClick:function(){e.updateID(e.id)},children:"Make Primary"})]})})}function C(e){var t=Object(r.useState)(e.id),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),i=Object(j.a)(s,2),d=i[0],b=i[1],l=Object(r.useState)([]),x=Object(j.a)(l,2),S=x[0],C=x[1];return Object(r.useEffect)((function(){var t=new O.a.Contract(m,v,e.signer);(function(){var e=Object(u.a)(o.a.mark((function e(){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getParents(a);case 2:return n=e.sent,e.next=5,t.getBranches(a);case 5:r=e.sent,b(n),C(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,e.signer]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(k,{signer:e.signer,updateID:c,createNewFunction:function(t){return new O.a.Contract(m,v,e.signer).newThread(t)},name:"New Thread"}),Object(w.jsx)(h.a,{onSubmit:function(e){e.preventDefault()},children:Object(w.jsxs)(h.a.Group,{as:p.a,children:[Object(w.jsx)(g.a,{sm:2,children:Object(w.jsx)("h3",{children:" Post Num: "})}),Object(w.jsx)(g.a,{sm:2,children:Object(w.jsx)(h.a.Control,{type:"number",value:a.toNumber(),onChange:function(e){var t=parseInt(e.target.value);t&&(t<=0||c(f.a.from(t)))}})})]})}),Object(w.jsx)("h3",{children:"Parents"}),d.map((function(t){return Object(w.jsx)(y,{id:t,signer:e.signer,updateID:c})})),Object(w.jsx)("h3",{children:"Post"}),Object(w.jsx)(y,{id:a,signer:e.signer,updateID:c}),Object(w.jsx)("h3",{children:"Replies"}),S.map((function(t){return Object(w.jsx)(y,{id:t,signer:e.signer,updateID:c})}))]})}var I=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(j.a)(c,2),i=s[0],h=s[1],p=Object(r.useState)(""),g=Object(j.a)(p,2),m=g[0],v=g[1];function k(){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,window.ethereum.enable();case 3:return t=new O.a.providers.Web3Provider(window.ethereum),n=t.getSigner(),e.next=7,n.getAddress();case 7:r=e.sent,console.log("Got Address!"),console.log(r),v(r),h(n),a(!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=Object(w.jsx)(w.Fragment,{}),I=Object(w.jsx)(w.Fragment,{});return n?y=Object(w.jsx)(d.a,{animation:"border",role:"status"}):null==i?y=Object(w.jsx)(b.a,{onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:case"end":return e.stop()}}),e)}))),children:"Connect Wallet"}):(y=Object(w.jsxs)("p",{children:["User Address: ",m]}),I=Object(w.jsx)(C,{id:f.a.from(1),signer:i})),Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(x.a,{children:[Object(w.jsxs)(l.a,{children:[Object(w.jsx)("h1",{children:"Tree Chan Frontend"}),y]}),I]})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,92)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};n(82);s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(I,{})}),document.getElementById("root")),F()}},[[83,1,2]]]);
//# sourceMappingURL=main.4765cd43.chunk.js.map